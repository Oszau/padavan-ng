--- miniupnpd-2.3.9.orig/linux/getifstats.c
+++ miniupnpd-2.3.9/linux/getifstats.c
@@ -77,7 +77,9 @@
 	char * p;
 	int i;
 	int r = -1;
+#if 0
 	char fname[64];
+#endif
 #ifdef ENABLE_GETIFSTATS_CACHING
 	static time_t cache_timestamp = 0;
 	static struct ifdata cache_data;
@@ -141,7 +143,9 @@
 		break;
 	}
 	fclose(f);
+#if 0 /* Disable get speed */
 	/* get interface speed */
+	/* NB! some interfaces, like ppp, don't support speed queries */
 	snprintf(fname, sizeof(fname), "/sys/class/net/%s/speed", ifname);
 	f = fopen(fname, "r");
 	if(f) {
@@ -154,6 +158,7 @@
 	} else {
 		syslog(LOG_INFO, "cannot read %s file : %m", fname);
 	}
+#endif
 #ifdef GET_WIRELESS_STATS
 	if(data->baudrate == BAUDRATE_DEFAULT) {
 		struct iwreq iwr;
--- miniupnpd-2.3.9.orig/miniupnpd.c
+++ miniupnpd-2.3.9/miniupnpd.c
@@ -2758,6 +2758,9 @@
 			}
 #endif
 			should_send_public_address_change_notif = 0;
+#ifdef ENABLE_LEASEFILE
+			reload_from_lease_file();
+#endif
 		}
 		/* Check if we need to send SSDP NOTIFY messages and do it if
 		 * needed */
--- miniupnpd-2.3.9.orig/upnpredirect.c
+++ miniupnpd-2.3.9/upnpredirect.c
@@ -687,7 +687,7 @@
 				       "%" PRIu64 "packets %" PRIu64 "bytes",
 				       list->eport, proto_itoa(list->proto),
 				       packets, bytes);
-				_upnp_delete_redir(list->eport, list->proto);
+				if(_upnp_delete_redir(list->eport, list->proto) >= 0)
 				n++;
 			}
 		}
